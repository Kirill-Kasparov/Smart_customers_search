# Smart_customers_search

Умный поиск клиентов

Предпосылки:
----------------------------
В своей работе часто возникает необходимость быстро найти компанию по косвенным метрикам, найти связи с другими организациями и собрать единый холдинг. Корпоративные ресурсы обрабатывали такую информацию либо долго, либо в узком спекторе.

Описание:
----------------------------
Программа работает как фильтр поиска по партнерской базе. Реализована система умного поиска, позволяющая искать любой тип запроса в одно окно. Результат поиска сохраняется в файле export_partners.csv в той же папке, где расположена программа.
На вход программа использует выгрузку - массив партнерской базы ДКРП на дату формирования отчета. Для корректной работы требуется наличие в папке, где содержится программа, файла с партнерской базой в формате CSV и именем «import.csv».
Результатом работы программы является запрошенная пользователем информация, выведенная на экран и сохраненная в файле export_partners.csv


Администрирование (для сетевой версии):
----------------------------
Для сетевой версии добавлены админские функции дистанционного управления – добавление нового пользователя, удаление, логи запросов, логи дисконектов и вылетов, обновление базы, перещагрузка, принудительное выключение.


Реализованы механизмы поиска:
----------------------------
По коду партнера:
На вход программа принимает один или несколько Кодов партнера, записанных через пробел. Результатом является список Главкодов со всеми картами, которые относятся к запрошенному коду партнера.
Пример запроса: 2830207 1670771 1069153

По наименованию партнера:
На вход программа принимает текст, содержащий часть названия партнера. Можно указать несколько наименований через запятую. Результатом является список всех партнеров, которые содержат указанное наименования.
Пример запроса: Газпром, Торгсервис

По ИНН:
На вход программа принимает один или несколько ИНН, записанных через пробел. Результатом является список всех карт ДКРП, имеющих указанные ИНН организаций.
Пример запроса: 7706564354 7702836198

По коду сети:
На вход программа принимает один или несколько Кодов сети, записанных через пробел. Результатом является список всех карт ДКРП, входящих в состав запрошенной сети.
Пример запроса: 100 227 2830

По коду SAP id:
На вход программа принимает один из ключей «SAP»/ «id», далее один или несколько Кодов в формате SAP, записанных через пробел. Результатом является список всех карт ДКРП, входящих в состав запрошенной сети.
Пример запроса: сап 3870775 1906719

По руководителю группы («ТРП»):
На вход программа принимает ключ «ТРП» и список логинов ТРП, записанных через пробел. Результатом является список всех карт партнеров, закрепленных за указанным ТРП. Если не указывать логины ТРП, программа выведет весь список ТРП
Пример запроса: ТРП mma12 aen28 baeeq (выводит список карт)
Пример запроса: ТРП (выводит список ТРП)

По торговому представителю («ТП»):
На вход программа принимает ключ «ТП» и список кодов ТП, либо список ФИО ТП, записанных через пробел и разделенных запятыми. Результатом является список всех карт партнеров, закрепленных за указанным ТП, либо список всех ТП, если в запросе не указаны коды и ФИО.
Пример запроса: ТП Гутников Алексей, Коновалов, Ольхов Дмитрий Владимирович (выведет список карт всех указанных ТП. Если с указанным ФИО выявлено более 1-го ТП, выведет всех ТП)
Пример запроса: ТП (выведем список всех ТП)

По коду ЦФУ («ЦФУ»):
На вход программа принимает ключ «ЦФУ» и список логинов кодов ЦФУ, записанных через пробел. Результатом является список всех карт партнеров, закрепленных за указанным ЦФУ. Если не указывать коды ЦФУ, программа выведет весь список ЦФУ.
Пример запроса: ЦФУ 1QE 23L 24H (выводит список карт)
Пример запроса: ЦФУ (выводит весь список сбытовых ЦФУ)

По виду деятельности («ВД»):
На вход программа принимает ключ «ВД» и название ВД, записанных в список через запятую. Результатом является список всех карт партнеров, закрепленных за указанным ВД. Если не указывать названия ВД, программа выведет уникальный список ВД и УВД.
Пример запроса: ВД Торговля, Образование (выводит список карт)
Пример запроса: ВД (выводит весь список ВД и УВД)

По уточняющему виду деятельности («УВД»):
На вход программа принимает ключ «ВД» и название ВД, записанных в список через запятую. Результатом является список всех карт партнеров, закрепленных за указанным ВД. Если не указывать названия ВД, программа выведет уникальный список ВД и УВД.
Пример запроса: УВД Стоматология, Клининг (выводит список карт)
Пример запроса: УВД (выводит весь список ВД и УВД)

По бизнес-региону («БР»):
На вход программа принимает ключ «БР» и наименования регионов, записанных в список через запятую. Результатом является список всех карт партнеров, закрепленных за указанным БР. Если не указывать название региона, программа выведет уникальный список БР с привязкой к закрепленному региону.
Пример запроса: БР Урал, Сибирь (выводит список карт)
Пример запроса: БР (выводит список всех бизнес-регионов)

По центру прибыли («ЦП»):
На вход программа принимает ключ «ЦП» и наименования центров прибыли, записанных в список через запятую. Результатом является список всех карт партнеров, закрепленных за указанным ЦП. Если не указывать название центра прибыли, программа выведет уникальный список ЦП с привязкой к закрепленному региону.
Пример запроса: ЦП Торговля, Офис (выводит список карт, относящихся к указанным ЦП)
Пример запроса: ЦП (выводит список всех ЦП с указанием кода ЦП и БР)

По названию группы продаж («ГП»):
На вход программа принимает ключ «ГП» и наименования групп продаж, записанных в список через запятую. Результатом является список всех карт партнеров, закрепленных за указанной группой. Если не указывать название ГП, программа выведет уникальный список групп и уточняющую информацию по коду ЦФУ / ЦП / Коду ЦП / БР. (Аналог запроса «ЦФУ», но с другой последовательностью колонок)
Пример запроса: ГП Торговля, Производство (выводит список карт, относящихся у группас, содержащим в названии слова «торговля» или «производство»)
Пример запроса: ГП (выводит уникальный список всех групп продаж)

Добавление данных в сформированную таблицу:
Ввод символа «+» (плюс) в начале строки добавит новые данные к предыдущему запросу. Исключения: «ТП», «ТРП», «ЦФУ», «ВД», «БР», «ЦП», «ГП» - выводящие уникальные значения, а не список партнеров.
Пример запроса: + ЦФУ 1QE

Удаление данных из сформированной таблицы:
Ввод символа «-» (минус) в начале строки удалит запрошенные данные к предыдущему запросу. Исключения: «ТП», «ТРП», «ЦФУ», «ВД», «БР», «ЦП», «ГП» - выводящие уникальные значения, а не список партнеров.
Раннее сформированный запрос: ВД Торговля
Пример запроса: - БР Москва, ЦФО

Выбор данных в сформированной таблице:
Ввод символа «=» (равно) в начале строки отфильтрует из раннее запрошенной таблицы данные, сохранив строки в соответствии с новым запросом. Исключения: «ТП», «ТРП», «ЦФУ», «ВД», «БР», «ЦП», «ГП» - выводящие уникальные значения, а не список партнеров.
Раннее сформированный запрос: ТРП aen28
Пример запроса: = ТП 5236
